import{m as F,_ as h,c as w}from"./index-6f9c12d4.js";import{f as x,h as k}from"./vendor-1e70d1e5.js";const y=Vue.createTextVNode("确定修改"),N=Vue.defineComponent({__name:"BasicSetting",setup(f){const i={oldpassword:{required:!0,message:"请输入旧密码",trigger:"blur"},password:{required:!0,message:"请输入新密码",trigger:"blur"}},t=Vue.ref(null),s=naive.useMessage(),e=Vue.reactive({oldpassword:"",password:""});function d(){t.value.validate(l=>{if(l)s.error("验证失败，请填写完整信息");else{const{oldpassword:u,password:o}=e;F({oldpassword:u,password:o}).then(()=>{s.info("修改密码成功，下次登录请使用新密码！")})}})}return(l,u)=>{const o=Vue.resolveComponent("n-input"),r=Vue.resolveComponent("n-form-item"),_=Vue.resolveComponent("n-button"),n=Vue.resolveComponent("n-space"),m=Vue.resolveComponent("n-form"),V=Vue.resolveComponent("n-grid-item"),p=Vue.resolveComponent("n-grid");return Vue.openBlock(),Vue.createBlock(p,{cols:"2 s:2 m:2 l:3 xl:3 2xl:3",responsive:"screen"},{default:Vue.withCtx(()=>[Vue.createVNode(V,null,{default:Vue.withCtx(()=>[Vue.createVNode(m,{"label-width":80,model:e,rules:i,ref_key:"formRef",ref:t},{default:Vue.withCtx(()=>[Vue.createVNode(r,{label:"旧密码",path:"oldpassword"},{default:Vue.withCtx(()=>[Vue.createVNode(o,{value:e.oldpassword,"onUpdate:value":u[0]||(u[0]=a=>e.oldpassword=a),placeholder:"请输入旧密码"},null,8,["value"])]),_:1}),Vue.createVNode(r,{label:"新密码",path:"password"},{default:Vue.withCtx(()=>[Vue.createVNode(o,{placeholder:"请输入新密码",value:e.password,"onUpdate:value":u[1]||(u[1]=a=>e.password=a)},null,8,["value"])]),_:1}),Vue.createElementVNode("div",null,[Vue.createVNode(n,null,{default:Vue.withCtx(()=>[Vue.createVNode(_,{type:"primary",onClick:d},{default:Vue.withCtx(()=>[y]),_:1})]),_:1})])]),_:1},8,["model"])]),_:1})]),_:1})}}});const E=Vue.defineComponent({__name:"account",setup(f){const i=[{name:"修改密码",key:1},{name:"退出登录",key:3}],t=Vue.ref(1),s=Vue.ref("修改密码"),e=naive.useMessage(),d=w(),l=naive.useDialog(),u=x(),o=k();function r(){l.info({title:"提示",content:"您确定要退出登录吗",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{d.logout().then(()=>{e.success("成功退出登录"),localStorage.removeItem("TABS-ROUTES"),u.replace({name:"Login",query:{redirect:o.fullPath}})})},onNegativeClick:()=>{}})}function _(n){n.key==3?r():(t.value=n.key,s.value=n.name)}return(n,m)=>{const V=Vue.resolveComponent("n-thing"),p=Vue.resolveComponent("n-list-item"),a=Vue.resolveComponent("n-list"),C=Vue.resolveComponent("n-grid-item"),B=Vue.resolveComponent("PM2"),v=Vue.resolveComponent("n-card"),g=Vue.resolveComponent("n-grid");return Vue.openBlock(),Vue.createBlock(g,{"x-gap":24},{default:Vue.withCtx(()=>[Vue.createVNode(C,{span:"6"},{default:Vue.withCtx(()=>[Vue.createVNode(a,null,{default:Vue.withCtx(()=>[Vue.createVNode(p,null,{default:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(i,c=>Vue.createVNode(V,{class:Vue.normalizeClass(["thing-cell",{"thing-cell-on":t.value===c.key}]),key:c.key,onClick:b=>_(c)},{header:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(c.name),1)]),_:2},1032,["class","onClick"])),64))]),_:1})]),_:1})]),_:1}),Vue.createVNode(C,{span:"18"},{default:Vue.withCtx(()=>[Vue.createVNode(v,{bordered:!1,size:"small",title:s.value,class:"proCard"},{default:Vue.withCtx(()=>[t.value===1?(Vue.openBlock(),Vue.createBlock(N,{key:0})):Vue.createCommentVNode("",!0),t.value===2?(Vue.openBlock(),Vue.createBlock(B,{key:1})):Vue.createCommentVNode("",!0)]),_:1},8,["title"])]),_:1})]),_:1})}}}),S=h(E,[["__scopeId","data-v-3065321b"]]);export{S as default};
