import{h as N}from"./vendor-1e70d1e5.js";import{c as f}from"./index-5c1076ad.js";import{s as V}from"./index-de28ae1e.js";import{_ as h}from"./index-5b101bf5.js";import{_ as S}from"./index-20ae1759.js";const x={class:"page"},b={style:{margin:"20px"}},B=["id"],C=["id"],w={class:"pre"},D=Vue.defineComponent({__name:"index",setup(E){function d(u){return u=u<<3,u>1024*1024?(u/1024/1024).toFixed(2)+" mb/s":u>1024?(u/1024).toFixed(2)+" kb/s":u.toString()+" b/s"}const r=Vue.computed(()=>JSON.stringify(l.value,null,2)),i=N(),{query:c,params:p}=i,l=Vue.ref({}),o={};async function _(){l.value=await f(p.id,c.path),l.value.Tracks=l.value.Tracks.sort((u,n)=>u.Name.localeCompare(n.Name)),l.value.Tracks.forEach(u=>{o[u.Name]?(o[u.Name].bpsds.addPoint(+new Date,u.BPS),o[u.Name].fpsds.addPoint(+new Date,u.FPS),o[u.Name].bps.updateEndDate(),o[u.Name].fps.updateEndDate()):Vue.nextTick(()=>{const n=o[u.Name]={bps:new V.TimelineGraphView(document.getElementById(`bps${u.Name}`)),fps:new V.TimelineGraphView(document.getElementById(`fps${u.Name}`)),bpsds:new V.TimelineDataSeries,fpsds:new V.TimelineDataSeries};n.bps.addDataSeries(n.bpsds),n.fps.addDataSeries(n.fpsds)})})}return(u,n)=>{const t=Vue.resolveComponent("n-statistic"),a=Vue.resolveComponent("n-gi"),m=Vue.resolveComponent("n-grid");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createVNode(Vue.unref(h),{onTick:_}),Vue.createElementVNode("div",x,[Vue.createVNode(m,{"x-gap":"12",cols:6},{default:Vue.withCtx(()=>[Vue.createVNode(a,{span:"6"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{label:"流标识",value:l.value.Path},null,8,["value"])]),_:1}),Vue.createVNode(a,{span:"1"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{label:"流状态",value:["⌛等待发布者","🟢发布中","🟡等待关闭","🔴已关闭"][l.value.State]},null,8,["value"])]),_:1}),Vue.createVNode(a,{span:"2"},{default:Vue.withCtx(()=>{var e;return[Vue.createVNode(t,{label:"发布类型",value:(e=l.value.Publisher)==null?void 0:e.Type},null,8,["value"])]}),_:1}),Vue.createVNode(a,{span:"2"},{default:Vue.withCtx(()=>{var e;return[Vue.createVNode(t,{label:"发布时间",value:(e=l.value.Publisher)==null?void 0:e.StartTime},null,8,["value"])]}),_:1}),Vue.createVNode(a,{span:"1"},{default:Vue.withCtx(()=>{var e;return[Vue.createVNode(t,{label:"订阅者总数",value:((e=l.value.Subscribers)==null?void 0:e.length)||0},null,8,["value"])]}),_:1}),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(l.value.Tracks,(e,s)=>(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:s},[Vue.createVNode(a,{span:"6"},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",b,"-轨道"+Vue.toDisplayString(s)+"详情-",1)]),_:2},1024),Vue.createVNode(a,{span:"1"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{label:"轨道名称",value:e.Name},null,8,["value"])]),_:2},1024),Vue.createVNode(a,{span:"1"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{label:"BPS",value:d(e.BPS)},null,8,["value"])]),_:2},1024),Vue.createVNode(a,{span:"1"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{label:"FPS",value:e.FPS},null,8,["value"])]),_:2},1024),Vue.createVNode(a,{span:"1"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{label:"裸数据长度",value:e.RawSize+" byte"},null,8,["value"])]),_:2},1024),Vue.createVNode(a,{span:"2"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{label:"裸数据前10字节",value:e.RawPart.map(v=>v.toString(16).toUpperCase().padStart(2,"0")).join(",")},null,8,["value"])]),_:2},1024),Vue.createVNode(a,{span:"1"},{default:Vue.withCtx(()=>[e.SPSInfo?(Vue.openBlock(),Vue.createBlock(t,{key:0,label:"分辨率",value:e.SPSInfo.Width+"x"+e.SPSInfo.Height},null,8,["value"])):(Vue.openBlock(),Vue.createBlock(t,{key:1,label:"通道数",value:e.Channels},null,8,["value"]))]),_:2},1024),Vue.createVNode(a,{span:"1"},{default:Vue.withCtx(()=>[e.GOP?(Vue.openBlock(),Vue.createBlock(t,{key:0,label:"GOP",value:e.GOP},null,8,["value"])):(Vue.openBlock(),Vue.createBlock(t,{key:1,label:"位深度",value:e.SampleSize},null,8,["value"]))]),_:2},1024),Vue.createVNode(a,{span:"1"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{label:"累计帧数",value:e.MoveCount},null,8,["value"])]),_:2},1024),Vue.createVNode(a,{span:"1"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{label:"时间戳",value:e.LastValue.AbsTime},null,8,["value"])]),_:2},1024),Vue.createVNode(a,{span:"1"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{label:"PTS",value:e.LastValue.PTS},null,8,["value"])]),_:2},1024),Vue.createVNode(a,{span:"1"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{label:"DTS",value:e.LastValue.DTS},null,8,["value"])]),_:2},1024),Vue.createVNode(a,{span:"2"},{default:Vue.withCtx(()=>[Vue.createElementVNode("canvas",{id:"bps"+e.Name},null,8,B)]),_:2},1024),Vue.createVNode(a,{span:"2"},{default:Vue.withCtx(()=>[Vue.createElementVNode("canvas",{id:"fps"+e.Name},null,8,C)]),_:2},1024)],64))),128))]),_:1})]),Vue.createElementVNode("pre",w,Vue.toDisplayString(Vue.unref(r)),1)])}}}),k=S(D,[["__scopeId","data-v-77259bbb"]]);export{k as default};
