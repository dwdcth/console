import{_ as y}from"./index-5b101bf5.js";import{B as d}from"./TableAction-8e1164f9.js";import{l as N,n as b,o as D,q as S}from"./index-44f2928b.js";import{h as T}from"./vendor-1e70d1e5.js";import"./useDesignSetting-84a63a26.js";import"./index-19bd79aa.js";const E=Vue.createTextVNode("开始录制"),I=Vue.createTextVNode("开始录制"),A=Vue.defineComponent({__name:"index",setup(P){const s=Vue.ref(""),c=Vue.ref("flv"),o=naive.useMessage(),a=Vue.ref(!1),{params:r}=T();function V(e){return e>1024*1024?(e/1024/1024).toFixed(2)+" MB":e>1024?(e/1024).toFixed(2)+" KB":e.toString()+" B"}const p=[{title:"ID",key:"ID"},{title:"Type",key:"Type",width:150},{title:"开始时间",render:e=>Vue.h(naive.NTime,{type:"relative",time:new Date(e.StartTime)}),width:150}],m={title:"操作",key:"action",width:100,render:e=>Vue.h(naive.NButton,{type:"error",size:"small",onClick:()=>{b(r.id,e.ID).then(t=>{t=="ok"?o.success("停止录制成功"):o.error("停止录制失败")}).catch(t=>{o.error(t)})}},["停止"])},v=[{title:"文件",key:"Path"},{title:"大小",render:e=>Vue.h("text",V(e.Size)),width:100},{title:"时长",key:"Duration",width:100}],C=[],l=Vue.ref([]),i=Vue.ref([]);N(r.id).then(e=>{l.value=e||[],l.value=l.value.sort((t,n)=>t.Path.localeCompare(n.Path))});function _(){D(r.id).then(e=>{i.value=e||[],i.value=i.value.sort((t,n)=>t.ID.localeCompare(n.ID))})}function f(){S(r.id,s.value,c.value).then(e=>{e?o.success("开始录制成功"):o.error("开始录制失败")}).catch(e=>{o.error(e)})}return(e,t)=>{const n=Vue.resolveComponent("n-tab-pane"),F=Vue.resolveComponent("n-tabs"),w=Vue.resolveComponent("n-layout-content"),h=Vue.resolveComponent("n-radio-button"),x=Vue.resolveComponent("n-radio-group"),B=Vue.resolveComponent("n-input"),g=Vue.resolveComponent("n-modal"),k=Vue.resolveComponent("n-layout");return Vue.openBlock(),Vue.createBlock(k,null,{default:Vue.withCtx(()=>[Vue.createVNode(w,{"content-style":"padding: 24px;"},{default:Vue.withCtx(()=>[Vue.createVNode(F,{type:"line",animated:""},{default:Vue.withCtx(()=>[Vue.createVNode(n,{name:"filelist",tab:"录像文件列表"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(d),{title:"录像文件列表",class:"table","row-class-name":"row",columns:v,dataSource:l.value,pagination:{simple:!0},actionColumn:C,"row-key":u=>u.Name,"scroll-x":1090},{toolbar:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(naive.NButton),{onClick:t[0]||(t[0]=u=>a.value=!0)},{default:Vue.withCtx(()=>[E]),_:1})]),_:1},8,["dataSource","row-key"])]),_:1}),Vue.createVNode(n,{name:"recording",tab:"正在录制列表"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(d),{title:"正在录制的流列表",class:"table","row-class-name":"row",columns:p,dataSource:i.value,pagination:{simple:!0},actionColumn:m,"row-key":u=>u.ID,"scroll-x":1090},{toolbar:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(y),{onTick:_,style:{padding:"0 20px 0 0"}}),Vue.createVNode(Vue.unref(naive.NButton),{onClick:t[1]||(t[1]=u=>a.value=!0)},{default:Vue.withCtx(()=>[I]),_:1})]),_:1},8,["dataSource","row-key"])]),_:1})]),_:1})]),_:1}),Vue.createVNode(g,{show:a.value,"onUpdate:show":t[4]||(t[4]=u=>a.value=u),style:{width:"600px"},title:"开始录制",bordered:!1,size:"huge",preset:"dialog","positive-text":"确认","negative-text":"算了",onPositiveClick:t[5]||(t[5]=u=>f())},{default:Vue.withCtx(()=>[Vue.createVNode(x,{value:c.value,"onUpdate:value":t[2]||(t[2]=u=>c.value=u),name:"radiobuttongroup1"},{default:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(["flv","mp4","hls","raw"],u=>Vue.createVNode(h,{key:u,value:u,label:u},null,8,["value","label"])),64))]),_:1},8,["value"]),Vue.createVNode(B,{value:s.value,"onUpdate:value":t[3]||(t[3]=u=>s.value=u),placeholder:"输入需要录制的StreamPath"},null,8,["value"])]),_:1},8,["show"])]),_:1})}}});export{A as default};
