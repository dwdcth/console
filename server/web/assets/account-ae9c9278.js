import{k as e,_ as t,c as o}from"./index-dbd922fe.js";import{g as l,i as u}from"./vendor-2e943313.js";const a=Vue.createTextVNode("确定修改"),n=Vue.defineComponent({__name:"BasicSetting",setup(t){const o={oldpassword:{required:!0,message:"请输入旧密码",trigger:"blur"},password:{required:!0,message:"请输入新密码",trigger:"blur"}},l=Vue.ref(null),u=naive.useMessage(),n=Vue.reactive({oldpassword:"",password:""});function r(){l.value.validate((t=>{if(t)u.error("验证失败，请填写完整信息");else{const{oldpassword:t,password:o}=n;e({oldpassword:t,password:o}).then((()=>{u.info("修改密码成功，下次登录请使用新密码！")}))}}))}return(e,t)=>{const u=Vue.resolveComponent("n-input"),s=Vue.resolveComponent("n-form-item"),V=Vue.resolveComponent("n-button"),d=Vue.resolveComponent("n-space"),i=Vue.resolveComponent("n-form"),c=Vue.resolveComponent("n-grid-item"),p=Vue.resolveComponent("n-grid");return Vue.openBlock(),Vue.createBlock(p,{cols:"2 s:2 m:2 l:3 xl:3 2xl:3",responsive:"screen"},{default:Vue.withCtx((()=>[Vue.createVNode(c,null,{default:Vue.withCtx((()=>[Vue.createVNode(i,{"label-width":80,model:n,rules:o,ref_key:"formRef",ref:l},{default:Vue.withCtx((()=>[Vue.createVNode(s,{label:"旧密码",path:"oldpassword"},{default:Vue.withCtx((()=>[Vue.createVNode(u,{value:n.oldpassword,"onUpdate:value":t[0]||(t[0]=e=>n.oldpassword=e),placeholder:"请输入旧密码"},null,8,["value"])])),_:1}),Vue.createVNode(s,{label:"新密码",path:"password"},{default:Vue.withCtx((()=>[Vue.createVNode(u,{placeholder:"请输入新密码",value:n.password,"onUpdate:value":t[1]||(t[1]=e=>n.password=e)},null,8,["value"])])),_:1}),Vue.createElementVNode("div",null,[Vue.createVNode(d,null,{default:Vue.withCtx((()=>[Vue.createVNode(V,{type:"primary",onClick:r},{default:Vue.withCtx((()=>[a])),_:1})])),_:1})])])),_:1},8,["model"])])),_:1})])),_:1})}}}),r=t(Vue.defineComponent({__name:"account",setup(e){const t=[{name:"修改密码",key:1},{name:"退出登录",key:3}],a=Vue.ref(1),r=Vue.ref("修改密码"),s=naive.useMessage(),V=o(),d=naive.useDialog(),i=l(),c=u();function p(e){3==e.key?d.info({title:"提示",content:"您确定要退出登录吗",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{V.logout().then((()=>{s.success("成功退出登录"),localStorage.removeItem("TABS-ROUTES"),i.replace({name:"Login",query:{redirect:c.fullPath}})}))},onNegativeClick:()=>{}}):(a.value=e.key,r.value=e.name)}return(e,o)=>{const l=Vue.resolveComponent("n-thing"),u=Vue.resolveComponent("n-list-item"),s=Vue.resolveComponent("n-list"),V=Vue.resolveComponent("n-grid-item"),d=Vue.resolveComponent("PM2"),i=Vue.resolveComponent("n-card"),c=Vue.resolveComponent("n-grid");return Vue.openBlock(),Vue.createBlock(c,{"x-gap":24},{default:Vue.withCtx((()=>[Vue.createVNode(V,{span:"6"},{default:Vue.withCtx((()=>[Vue.createVNode(s,null,{default:Vue.withCtx((()=>[Vue.createVNode(u,null,{default:Vue.withCtx((()=>[(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(t,(e=>Vue.createVNode(l,{class:Vue.normalizeClass(["thing-cell",{"thing-cell-on":a.value===e.key}]),key:e.key,onClick:t=>p(e)},{header:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.name),1)])),_:2},1032,["class","onClick"]))),64))])),_:1})])),_:1})])),_:1}),Vue.createVNode(V,{span:"18"},{default:Vue.withCtx((()=>[Vue.createVNode(i,{bordered:!1,size:"small",title:r.value,class:"proCard"},{default:Vue.withCtx((()=>[1===a.value?(Vue.openBlock(),Vue.createBlock(n,{key:0})):Vue.createCommentVNode("",!0),2===a.value?(Vue.openBlock(),Vue.createBlock(d,{key:1})):Vue.createCommentVNode("",!0)])),_:1},8,["title"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-194ed0ad"]]);export{r as default};
