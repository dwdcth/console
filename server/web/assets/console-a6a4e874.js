import{i as e,s as t}from"./vendor-2e943313.js";import{g as l}from"./index-8caa8cc3.js";import{s as u}from"./index-7c963abe.js";import{_ as a}from"./index-dbd922fe.js";const o=Vue.defineComponent({__name:"TimelineGraph",props:{value:null},setup(e){const t=e,l=Vue.ref(),a=[],o=["red","blue","green","yellow"];return Vue.onMounted((()=>{const e=new u.TimelineGraphView(l.value);let n=0;Vue.watchEffect((()=>{const l=Date.now();l!=n&&(t.value.forEach(((t,n)=>{a[n]||(a[n]=new u.TimelineDataSeries,a[n].setColor(o[n]),e.addDataSeries(a[n])),a[n].addPoint(l,t)})),e.updateEndDate(),n=l)}))})),(e,t)=>(Vue.openBlock(),Vue.createElementBlock("canvas",{ref_key:"canvas",ref:l},null,512))}}),n=e=>(Vue.pushScopeId("data-v-60762021"),e=e(),Vue.popScopeId(),e),V={class:"console"},d={class:"py-1 px-1 flex justify-between"},r={key:1},i=Vue.createTextVNode(" 版本号： "),s={class:"text-1xl"},c=Vue.createTextVNode("启动时间： "),m={class:"py-1 px-1 flex justify-between"},p={class:"py-1 px-1 flex justify-between"},v={class:"py-1 px-1 flex justify-between"},f={key:1,class:"text-3xl"},x={class:"py-1 px-1 flex justify-between"},N={key:1,class:"text-3xl"},w={class:"py-1 px-1 flex justify-between"},y={key:1,class:"text-3xl"},C={class:"mt-4"},g=n((()=>Vue.createElementVNode("thead",null,[Vue.createElementVNode("tr",null,[Vue.createElementVNode("td",{style:{width:"20%"}},"网卡"),Vue.createElementVNode("td",{style:{width:"20%"}},"接收总bit"),Vue.createElementVNode("td",{style:{width:"20%"}},"发送总bit"),Vue.createElementVNode("td",{style:{width:"20%"}},"接收速率"),Vue.createElementVNode("td",{style:{width:"20%"}},"发送速率")])],-1))),h=a(Vue.defineComponent({__name:"console",setup(u){const a=Vue.ref(!0),n=Vue.ref({}),h=Vue.ref([]),k=Vue.ref(""),E=Vue.ref(""),_=Vue.ref(""),b=Vue.ref(""),S=Vue.ref(""),B=Vue.ref([]),D=Vue.ref([]),z=Vue.ref([]),j=Vue.ref([]);function F(e){return e>1048576?(e/1024/1024).toFixed(2)+" mb/s":e>1024?(e/1024).toFixed(2)+" kb/s":e.toString()+" b/s"}function U(e){return e>1048576?(e/1024/1024).toFixed(2)+" mb":e>1024?(e/1024).toFixed(2)+" kb":e.toString()+" b"}const T=e().params.id;let R;async function M(e){var t,l,u,o,V,d,r,i;const s=JSON.parse(e.data);B.value=[s.CPUUsage||0,(null==(t=s.HardDisk)?void 0:t.Usage)||0,(null==(l=s.Memory)?void 0:l.Usage)||0],D.value=[(null==(u=s.Streams)?void 0:u.length)||0],n.value=s,k.value=(null==(o=s.CPUUsage)?void 0:o.toFixed(2))+"%",E.value=(null==(d=null==(V=s.HardDisk)?void 0:V.Usage)?void 0:d.toFixed(2))+"%",_.value=(null==(i=null==(r=s.Memory)?void 0:r.Usage)?void 0:i.toFixed(2))+"%";const c=(s.NetWork||[]).filter((e=>0!=e.Receive&&0!=e.Sent));h.value=c,j.value=c.map((e=>e.ReceiveSpeed)),z.value=c.map((e=>e.SentSpeed)),a.value=!1}return Vue.onMounted((async()=>{const e=await l(T);S.value=e.StartTime,b.value=e.Version,R=new EventSource("/api/summary?m7sid="+T),R.onmessage=M})),t((()=>{null==R||R.close()})),(e,t)=>{const l=Vue.resolveComponent("n-skeleton"),u=Vue.resolveComponent("n-time"),n=Vue.resolveComponent("NCard"),T=Vue.resolveComponent("n-grid-item"),R=Vue.resolveComponent("n-grid"),M=Vue.resolveComponent("n-card"),I=Vue.resolveComponent("n-table"),P=Vue.resolveComponent("n-tab-pane"),G=Vue.resolveComponent("n-tabs"),H=Vue.resolveComponent("NCol"),J=Vue.resolveComponent("NRow");return Vue.openBlock(),Vue.createElementBlock("div",V,[Vue.createVNode(R,{cols:"1 s:2 m:3 l:3 xl:4 2xl:4",responsive:"screen","x-gap":12,"y-gap":8},{default:Vue.withCtx((()=>[Vue.createVNode(T,null,{default:Vue.withCtx((()=>[Vue.createVNode(n,{title:"基本信息",segmented:{content:!0,footer:!0},size:"small",bordered:!1},{default:Vue.withCtx((()=>[Vue.createElementVNode("div",d,[a.value?(Vue.openBlock(),Vue.createBlock(l,{key:0,width:100,size:"medium"})):(Vue.openBlock(),Vue.createElementBlock("div",r,[Vue.createElementVNode("div",null,[i,Vue.createElementVNode("span",s,Vue.toDisplayString(b.value),1)]),Vue.createElementVNode("div",null,[c,Vue.createVNode(u,{time:new Date(S.value),type:"relative"},null,8,["time"])])]))])])),_:1})])),_:1}),Vue.createVNode(T,null,{default:Vue.withCtx((()=>[Vue.createVNode(n,{title:"资源使用",segmented:{content:!0,footer:!0},size:"small",bordered:!1},{default:Vue.withCtx((()=>[Vue.createElementVNode("div",m,[Vue.createVNode(o,{value:B.value},null,8,["value"])])])),_:1})])),_:1}),Vue.createVNode(T,null,{default:Vue.withCtx((()=>[Vue.createVNode(n,{title:"流数量",segmented:{content:!0,footer:!0},size:"small",bordered:!1},{default:Vue.withCtx((()=>[Vue.createElementVNode("div",p,[Vue.createVNode(o,{value:D.value},null,8,["value"])])])),_:1})])),_:1}),Vue.createVNode(T,null,{default:Vue.withCtx((()=>[Vue.createVNode(n,{title:"cpu使用情况",segmented:{content:!0,footer:!0},size:"small",bordered:!1},{default:Vue.withCtx((()=>[Vue.createElementVNode("div",v,[a.value?(Vue.openBlock(),Vue.createBlock(l,{key:0,width:100,size:"medium"})):(Vue.openBlock(),Vue.createElementBlock("div",f,Vue.toDisplayString(k.value),1))])])),_:1})])),_:1}),Vue.createVNode(T,null,{default:Vue.withCtx((()=>[Vue.createVNode(n,{title:"内存使用",segmented:{content:!0,footer:!0},size:"small",bordered:!1},{default:Vue.withCtx((()=>[Vue.createElementVNode("div",x,[a.value?(Vue.openBlock(),Vue.createBlock(l,{key:0,width:100,size:"medium"})):(Vue.openBlock(),Vue.createElementBlock("div",N,Vue.toDisplayString(_.value),1))])])),_:1})])),_:1}),Vue.createVNode(T,null,{default:Vue.withCtx((()=>[Vue.createVNode(n,{title:"硬盘使用",segmented:{content:!0,footer:!0},size:"small",bordered:!1},{default:Vue.withCtx((()=>[Vue.createElementVNode("div",w,[a.value?(Vue.openBlock(),Vue.createBlock(l,{key:0,width:100,size:"medium"})):(Vue.openBlock(),Vue.createElementBlock("div",y,Vue.toDisplayString(E.value),1))])])),_:1})])),_:1})])),_:1}),Vue.createElementVNode("div",C,[Vue.createVNode(J,{gutter:24},{default:Vue.withCtx((()=>[Vue.createVNode(H,{span:24},{default:Vue.withCtx((()=>[Vue.createVNode(M,{"content-style":"padding: 0;",bordered:!1},{default:Vue.withCtx((()=>[Vue.createVNode(G,{type:"line",size:"large","tabs-padding":20,"pane-style":"padding: 20px;"},{default:Vue.withCtx((()=>[Vue.createVNode(P,{name:"网络",class:"pane"},{default:Vue.withCtx((()=>[Vue.createVNode(R,{cols:"2 s:1 m:1 l:1 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":8},{default:Vue.withCtx((()=>[Vue.createVNode(T,null,{default:Vue.withCtx((()=>[Vue.createVNode(M,{title:"接收速率"},{default:Vue.withCtx((()=>[Vue.createVNode(o,{value:j.value},null,8,["value"])])),_:1})])),_:1}),Vue.createVNode(T,null,{default:Vue.withCtx((()=>[Vue.createVNode(M,{title:"发送速率"},{default:Vue.withCtx((()=>[Vue.createVNode(o,{value:z.value},null,8,["value"])])),_:1})])),_:1})])),_:1}),Vue.createVNode(I,{"single-line":!1},{default:Vue.withCtx((()=>[g,Vue.createElementVNode("tbody",null,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(h.value,(e=>(Vue.openBlock(),Vue.createElementBlock("tr",{key:e.Name},[Vue.createElementVNode("td",null,Vue.toDisplayString(e.Name),1),Vue.createElementVNode("td",null,Vue.toDisplayString(U(e.Receive)),1),Vue.createElementVNode("td",null,Vue.toDisplayString(U(e.Sent)),1),Vue.createElementVNode("td",null,Vue.toDisplayString(F(e.ReceiveSpeed)),1),Vue.createElementVNode("td",null,Vue.toDisplayString(F(e.SentSpeed)),1)])))),128))])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])])}}}),[["__scopeId","data-v-60762021"]]);export{h as default};
