import{i as e}from"./vendor-2e943313.js";import{d as t}from"./index-8caa8cc3.js";import"./index-dbd922fe.js";const a=Vue.createTextVNode("生成推拉流地址"),l=Vue.createTextVNode("复制"),u=Vue.createTextVNode("复制"),n=Vue.defineComponent({__name:"index",setup(n){const o=Vue.ref([]),r=Vue.ref([]),s=naive.useMessage(),V=Vue.reactive({hostname:"localhost",streamPath:"live/test",expire:new Date}),m={hostname:{required:!0,message:"域名",trigger:["blur","change"],validator:(e,t)=>t?"localhost"==t||/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$|^(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/.test(t):(e.message="域名",!1)},streamPath:{required:!0,message:"请输入StreamPath",trigger:"blur",validator:(e,t)=>t?1==t.split("/").length?(e.message="StreamPath必须包含/",!1):t.startsWith("/")?(e.message="StreamPath开头不能包含/",!1):!t.endsWith("/")||(e.message="StreamPath结尾不能包含/",!1):(e.message="请输入StreamPath",!1)}},{id:d}=e().params,c={};async function i(){const{hostname:e,streamPath:t}=V;if(c.RTMP&&(o.value.push({name:"RTMP",url:`rtmp://${e}/${t}`}),r.value.push({name:"RTMP",url:`rtmp://${e}/${t}`})),c.RTSP&&(o.value.push({name:"RTSP",url:`rtsp://${e}/${t}`}),r.value.push({name:"RTMP",url:`rtsp://${e}/${t}`})),c.WebRTC&&r.value.push({name:"webrtc",url:`webrtc://${e}/${t}`}),c.Fmp4){const a=c.Fmp4.RawConfig.http,l=a.listenaddr,u=a.listenaddrtls;r.value.push({name:"fmp4(http)",url:`http://${e}${l}/${t}.mp4`}),r.value.push({name:"fmp4(https)",url:`https://${e}${u}/${t}.mp4`})}if(c.HLS){const a=c.HLS.RawConfig.http,l=a.listenaddr,u=a.listenaddrtls;r.value.push({name:"hls(http)",url:`http://${e}${l}/${t}.m3u8`}),r.value.push({name:"hls(https)",url:`https://${e}${u}/${t}.m3u8`})}if(c.HDL){const a=c.HDL.RawConfig.http.listenaddr;r.value.push({name:"http-flv",url:`http://${e}${a}/${t}.flv`})}if(c.Jessica){const a=c.Jessica.RawConfig.http.listenaddr;r.value.push({name:"ws-flv",url:`ws://${e}${a}/${t}.flv`}),r.value.push({name:"ws-raw",url:`ws://${e}${a}/${t}`})}}function p(e){navigator.clipboard.writeText(e).then((()=>{s.success("复制成功")}),(()=>{s.error("复制失败")}))}return t(d).then((e=>{for(const t in e)c[t]=e[t]})),(e,t)=>{const n=Vue.resolveComponent("n-input"),s=Vue.resolveComponent("n-form-item"),d=Vue.resolveComponent("n-form"),c=Vue.resolveComponent("n-button"),h=Vue.resolveComponent("n-divider"),v=Vue.resolveComponent("n-tag"),f=Vue.resolveComponent("n-table"),C=Vue.resolveComponent("n-descriptions-item"),$=Vue.resolveComponent("n-descriptions"),g=Vue.resolveComponent("n-layout-content"),w=Vue.resolveComponent("n-layout");return Vue.openBlock(),Vue.createBlock(w,null,{default:Vue.withCtx((()=>[Vue.createVNode(g,{"content-style":"padding: 24px;"},{default:Vue.withCtx((()=>[Vue.createVNode(d,{model:V,rules:m,ref:"formRef","label-placement":"left","label-width":80},{default:Vue.withCtx((()=>[Vue.createVNode(s,{label:"域名或IP",path:"hostname"},{default:Vue.withCtx((()=>[Vue.createVNode(n,{placeholder:"localhost",value:V.hostname,"onUpdate:value":t[0]||(t[0]=e=>V.hostname=e)},null,8,["value"])])),_:1}),Vue.createVNode(s,{label:"StreamPath",path:"streamPath"},{default:Vue.withCtx((()=>[Vue.createVNode(n,{placeholder:"请输入StreamPath",value:V.streamPath,"onUpdate:value":t[1]||(t[1]=e=>V.streamPath=e)},null,8,["value"])])),_:1})])),_:1},8,["model"]),Vue.createVNode(c,{onClick:i,type:"primary"},{default:Vue.withCtx((()=>[a])),_:1}),Vue.createVNode(h),Vue.createVNode($,{"label-placement":"top",title:"生成结果"},{default:Vue.withCtx((()=>[Vue.createVNode(C,{label:"推流地址","content-style":"padding-right: 20px;"},{default:Vue.withCtx((()=>[o.value.length?(Vue.openBlock(),Vue.createBlock(f,{key:0},{default:Vue.withCtx((()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(o.value,(e=>(Vue.openBlock(),Vue.createElementBlock("tr",null,[Vue.createElementVNode("td",null,[Vue.createVNode(v,null,{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.name),1)])),_:2},1024)]),Vue.createElementVNode("td",null,Vue.toDisplayString(e.url),1),Vue.createElementVNode("td",null,[Vue.createVNode(c,{onClick:t=>p(e.url)},{default:Vue.withCtx((()=>[l])),_:2},1032,["onClick"])])])))),256))])),_:1})):Vue.createCommentVNode("",!0)])),_:1}),Vue.createVNode(C,{label:"拉流地址",class:"desc"},{default:Vue.withCtx((()=>[r.value.length?(Vue.openBlock(),Vue.createBlock(f,{key:0},{default:Vue.withCtx((()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(r.value,(e=>(Vue.openBlock(),Vue.createElementBlock("tr",null,[Vue.createElementVNode("td",null,[Vue.createVNode(v,null,{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.name),1)])),_:2},1024)]),Vue.createElementVNode("td",null,Vue.toDisplayString(e.url),1),Vue.createElementVNode("td",null,[Vue.createVNode(c,{onClick:t=>p(e.url)},{default:Vue.withCtx((()=>[u])),_:2},1032,["onClick"])])])))),256))])),_:1})):Vue.createCommentVNode("",!0)])),_:1})])),_:1})])),_:1})])),_:1})}}});export{n as default};
