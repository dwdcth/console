import{g as e,i as t,q as a,r as o}from"./vendor-2e943313.js";import{_ as l,P as u,c as r}from"./index-dbd922fe.js";const c=""+new URL("../guide.png",import.meta.url).href,n=e=>(Vue.pushScopeId("data-v-4c0b340e"),e=e(),Vue.popScopeId(),e),s={class:"view-account"},d=n((()=>Vue.createElementVNode("div",{class:"view-account-header"},null,-1))),i={class:"view-account-container"},V={class:"view-account-top"},m={class:"view-account-top-logo"},p=n((()=>Vue.createElementVNode("div",{class:"view-account-top-desc"},"实例管理平台",-1))),v={class:"view-account-form"},f=Vue.createTextVNode(" 登录 "),w=n((()=>Vue.createElementVNode("img",{src:c,width:"300"},null,-1))),N=l(Vue.defineComponent({__name:"index",setup(l){const c=Vue.ref(),n=naive.useMessage(),N=Vue.ref(!1);u.BASE_LOGIN_NAME;const h=Vue.reactive({mail:"",password:"",isCaptcha:!0}),g={mail:{required:!0,message:"请输入邮箱账号",trigger:"blur"},password:{required:!0,message:"请输入密码",trigger:"blur"}},C=r(),x=e(),_=t(),E=()=>{c.value.validate((async e=>{var t;if(e)n.error("请填写完整信息，并且进行验证码校验");else{const{mail:e,password:o}=h;N.value=!0;const l={mail:e,password:o};try{const e=await C.login(l);if(n.destroyAll(),0==e.code){const e=decodeURIComponent((null==(t=_.query)?void 0:t.redirect)||"/");n.success("登录成功"),x.replace(e)}}catch(a){N.value=!1}finally{N.value=!1}}}))};function y(){x.push({name:"Register"})}function k(){x.push({name:"Password"})}return document.onkeydown=function(e){"Enter"==e.key&&E()},(e,t)=>{const l=Vue.resolveComponent("svg-icon"),u=Vue.resolveComponent("n-icon"),r=Vue.resolveComponent("n-input"),n=Vue.resolveComponent("n-form-item"),C=Vue.resolveComponent("n-button"),x=Vue.resolveComponent("n-form");return Vue.openBlock(),Vue.createElementBlock("div",s,[d,Vue.createElementVNode("div",i,[Vue.createElementVNode("div",V,[Vue.createElementVNode("div",m,[Vue.createVNode(l,{name:"logo",width:"256px"})]),p]),Vue.createElementVNode("div",v,[Vue.createVNode(x,{ref_key:"formRef",ref:c,"label-placement":"left",size:"large",model:h,rules:g},{default:Vue.withCtx((()=>[Vue.createVNode(n,{path:"mail"},{default:Vue.withCtx((()=>[Vue.createVNode(r,{value:h.mail,"onUpdate:value":t[0]||(t[0]=e=>h.mail=e),placeholder:"请输入邮箱账号"},{prefix:Vue.withCtx((()=>[Vue.createVNode(u,{size:"18",color:"#808695"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(a))])),_:1})])),_:1},8,["value"])])),_:1}),Vue.createVNode(n,{path:"password"},{default:Vue.withCtx((()=>[Vue.createVNode(r,{value:h.password,"onUpdate:value":t[1]||(t[1]=e=>h.password=e),type:"password",showPasswordOn:"click",placeholder:"请输入密码"},{prefix:Vue.withCtx((()=>[Vue.createVNode(u,{size:"18",color:"#808695"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(o))])),_:1})])),_:1},8,["value"])])),_:1}),Vue.createVNode(n,null,{default:Vue.withCtx((()=>[Vue.createVNode(C,{type:"primary",onClick:E,size:"large",loading:N.value,block:""},{default:Vue.withCtx((()=>[f])),_:1},8,["loading"])])),_:1}),Vue.createVNode(n,{class:"default-color"},{default:Vue.withCtx((()=>[Vue.createElementVNode("div",{class:"flex view-account-other"},[Vue.createElementVNode("div",{class:"flex-initial",style:{"margin-left":"auto"}},[Vue.createElementVNode("a",{onClick:y},"注册账号"),Vue.createElementVNode("a",{style:{"margin-left":"20px"},onClick:k},"忘记密码")])])])),_:1})])),_:1},8,["model"])])]),w])}}}),[["__scopeId","data-v-4c0b340e"]]);export{N as default};
