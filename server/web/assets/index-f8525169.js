import{h as _,f,o as w}from"./vendor-1e70d1e5.js";import{T as x,B as y}from"./TableAction-a07ea7ef.js";import{a as S,c as b}from"./index-7a5dc880.js";import{_ as V}from"./index-0ce86e07.js";import"./useDesignSetting-42a1e924.js";const k=[{title:"StreamPath",key:"Path",width:100},{title:"类型",key:"Type",width:50},{title:"订阅者",key:"Subscribers",width:50},{title:"开始时间",key:"StartTime",width:100},{title:"BPS",key:"BPS",width:100,render(u){const o=u.BPS<<3;return o>1024*1024?Vue.h("text",(o/1024/1024).toFixed(2)+" mb/s"):o>1024?Vue.h("text",(o/1024).toFixed(2)+" kb/s"):Vue.h("text",o+" b/s")}}];const C=Vue.defineComponent({__name:"index",setup(u){const o=_(),i=f(),{params:c}=o,r=c.id,s=Vue.ref([]),l=Vue.reactive({width:220,title:"操作",key:"action",fixed:"right",render(e){return Vue.h(x,{style:"button",actions:[{label:"流详情",type:"primary",onClick:m.bind(null,e),ifShow:()=>!0}],dropDownActions:[{label:"http公网",key:"1",text:e.Path,ifShow:()=>!0},{label:"http局域网",key:"2",text:e.Path,ifShow:()=>!0},{label:"https公网",key:"3",text:e.Path,ifShow:()=>!0},{label:"https局域网",key:"4",text:e.Path,ifShow:()=>!0}],select:(n,t)=>{p(n,t)}})}});Vue.onMounted(()=>{const e=S(r);e.onmessage=d,w(()=>e.close())});async function d(e){const n=JSON.parse(e.data);s.value=n.Streams.sort((t,a)=>t.Path.localeCompare(a.Path))}function h(e){console.log(e)}async function p(e,n){const t=n.text,a=await b(r,e=="2"||e=="4",e=="3"||e=="4");window.open(`${a}/preview/${t}`,"_blank")}function m(e){const n=e.id,t=e.Path;i.push({name:"instance_stream_detail",query:{id:n,path:t}})}return(e,n)=>{const t=Vue.resolveComponent("n-card");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createVNode(t,{bordered:!1,class:"proCard"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(y),{title:"流列表",columns:Vue.unref(k),dataSource:s.value,pagination:!1,"row-key":a=>a.id,actionColumn:l,"onUpdate:checkedRowKeys":h,"scroll-x":1090},null,8,["columns","dataSource","row-key","actionColumn"])]),_:1})])}}}),g=V(C,[["__scopeId","data-v-19bce288"]]);export{g as default};
