System.register(["./index-legacy.d1f2a5dd.js","./TableAction-legacy.c2cce013.js","./vendor-legacy.9d0d38ef.js","./index-legacy.ee50fea4.js","./useDesignSetting-legacy.ecb6b3a9.js"],(function(e,t){"use strict";var n,o,a,u,l;return{setters:[e=>{n=e.k,o=e.b},e=>{a=e.T,u=e.B},e=>{l=e.i},null,null],execute:function(){const t=Vue.createTextVNode(" 全文搜索 "),i=Vue.createTextVNode(" 实时跟踪 ");e("default",Vue.defineComponent({__name:"index",setup(e){const c=Vue.ref(""),r=Vue.ref(""),d=Vue.ref(!0),s=l().params.id,V=Vue.ref([]),p=Vue.computed((()=>c.value?V.value.filter((e=>-1!=e.Name.indexOf(c.value))):V.value));function f(e,t=""){const n={"":"K",K:"M",M:"G",G:null};return e>1024&&n[t]?f(e/1024,n[t]):(e||0).toFixed(2).replace(".00","")+t+"B"}const w=[{title:()=>Vue.h("div",["名称",Vue.h(naive.NInput,{placeholder:"按名称过滤",onUpdateValue(e){c.value=e}})]),key:"Name",width:100},{title:"大小",width:100,render:e=>Vue.h("text",f(e.Size))}];async function y(e){const t=await o(s,!0,!1);window.open(`${t}/logrotate/api/open?file=${encodeURI(e.Name)}`)}async function v(e){const t=await o(s,!0,!1);window.open(`${t}/logrotate/api/download?file=${encodeURI(e.Name)}`)}async function m(){const e=await o(s,!0,!1);window.open(`${e}/logrotate/api/find?query=${r.value}`)}async function x(){const e=await o(s,!0,!1);window.open(`${e}/logrotate/api/tail`)}n(s).then((e=>{V.value=e,d.value=!1}));const g=Vue.reactive({width:220,title:"操作",key:"action",render:e=>Vue.h(a,{style:"button",actions:[{label:"打开",type:"primary",icon:"ic:outline-delete-outline",onClick:y.bind(null,e)},{label:"下载",type:"primary",icon:"ic:outline-delete-outline",onClick:v.bind(null,e)}]})});return(e,n)=>{const o=Vue.resolveComponent("n-button"),a=Vue.resolveComponent("n-layout-content"),l=Vue.resolveComponent("n-layout");return Vue.openBlock(),Vue.createBlock(l,null,{default:Vue.withCtx((()=>[Vue.createVNode(a,{"content-style":"padding: 24px;"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(u),{title:"日志文件列表",class:"table",loading:d.value,"row-class-name":"row",columns:w,dataSource:Vue.unref(p),pagination:{simple:!0},actionColumn:g,"row-key":e=>e.Name,"scroll-x":1090},{toolbar:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(naive.NInput),{value:r.value,"onUpdate:value":n[0]||(n[0]=e=>r.value=e)},null,8,["value"]),Vue.createVNode(o,{"attr-type":"button",onClick:m},{default:Vue.withCtx((()=>[t])),_:1}),Vue.createVNode(o,{"attr-type":"button",onClick:x},{default:Vue.withCtx((()=>[i])),_:1})])),_:1},8,["loading","dataSource","actionColumn","row-key"])])),_:1})])),_:1})}}}))}}}));
