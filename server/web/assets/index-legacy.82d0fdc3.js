System.register(["./vendor-legacy.9d0d38ef.js","./TableAction-legacy.c2cce013.js","./index-legacy.4f2ba292.js","./index-legacy.d1f2a5dd.js","./index-legacy.ee50fea4.js","./useDesignSetting-legacy.ecb6b3a9.js"],(function(e,t){"use strict";var n,l,u,a,o,r,i,c,d,s;return{setters:[e=>{n=e.g,l=e.t},e=>{u=e.T,a=e.B},e=>{o=e._},e=>{r=e.A,i=e.B,c=e.e,d=e.u},e=>{s=e.c},null],execute:function(){function t(){const{loading:e,error:t,result:n,fetchResource:l}=function(e){const t=Vue.ref(!1),n=Vue.ref(null),l=Vue.ref(null);return{loading:t,error:l,result:n,fetchResource:u=>(t.value=!0,e(u).then((e=>{n.value=e})).catch((e=>{l.value=e})).finally((()=>{t.value=!1})))}}(r);return{loading:e,error:t,list:n,fetchResource:l}}const V=[{title:"id",key:"id",width:50},{title:"名称",key:"name",width:100},{title:"secret",key:"secret",width:200},{title:"创建时间",key:"createtime",width:200},{title:"状态",key:"online",width:100,render:e=>Vue.h(naive.NTag,{style:{marginRight:"6px"},type:1==e.online?"success":"error",bordered:!1},{default:()=>1==e.online?"在线":"离线"})}],f=Vue.createTextVNode(" 新建 "),v=Vue.createTextVNode("取消"),m=Vue.createTextVNode("确定");e("default",Vue.defineComponent({__name:"index",setup(e){const r={name:{required:!0,trigger:["blur","input"],message:"请输入名称"}},p=naive.useDialog(),h=Vue.ref(null),C=naive.useMessage(),w=Vue.ref(),y=n(),g=s(),b=Vue.ref(!1),x=Vue.ref(!1),k=Vue.reactive({name:"",url:"",enableReport:!1,resetSecret:!1}),N=Vue.ref(""),_=Vue.ref({id:"",name:"",mail:"",secret:""}),R=Vue.ref([]),S=Vue.reactive({width:200,title:"操作",key:"action",render:e=>Vue.h(u,{style:"button",actions:[{label:"详情",type:"primary",disabled:1!=e.online,onClick:A.bind(null,e)},{label:"编辑",type:"primary",onClick:D.bind(null,e),ifShow:()=>!0},{label:"删除",type:"error",icon:"ic:outline-delete-outline",onClick:$.bind(null,e),ifShow:()=>!0}],select:e=>{C.info(`您点击了，${e} 按钮`)}})});function T(){k.name="",k.url="",N.value="新建实例",b.value=!0}async function j(){const{list:e,error:n,fetchResource:l}=t();await l({pagesize:0,pageno:0}),n.value?C.info(`error--${n.value}`):R.value=e.value.data.list}function U(e){}function B(e){e.preventDefault(),x.value=!0,h.value.validate((e=>{if(e)C.error("请填写完整信息");else if("新建实例"==N.value){const e=k.name;c({name:e}).then((()=>{C.success("新建成功")}))}else if("编辑实例"==N.value){const e=_.value.id;d({id:e,...k}).then((()=>{C.success("编辑成功"),b.value=!1}))}x.value=!1}))}function D(e){k.name=e.name,k.url=e.url,k.enableReport=1==e.report,N.value="编辑实例",b.value=!0,_.value.id=e.id,_.value.name=e.name,_.value.mail=localStorage.getItem("mail")||""}function A(e){const t=e.id,n=y.resolve({name:"instance_dashboard",params:{id:t}});window.open(n.href,"_blank")}function $(e){p.info({title:"提示",content:"您确定要删除此实例吗",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{i({id:e.id}).then((()=>{C.success("删除成功")}))},onNegativeClick:()=>{}})}return(e,t)=>{const n=Vue.resolveComponent("n-icon"),u=Vue.resolveComponent("n-button"),i=Vue.resolveComponent("n-input"),c=Vue.resolveComponent("n-form-item"),d=Vue.resolveComponent("n-checkbox"),s=Vue.resolveComponent("n-switch"),p=Vue.resolveComponent("n-form"),C=Vue.resolveComponent("n-space"),y=Vue.resolveComponent("n-modal"),_=Vue.resolveComponent("n-card");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createVNode(Vue.unref(o),{onTick:j}),Vue.createVNode(_,{bordered:!1,class:"proCard"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(a),{columns:Vue.unref(V),dataSource:R.value,"row-key":e=>e.id,pagination:!1,ref_key:"actionRef",ref:w,actionColumn:S,"onUpdate:checkedRowKeys":U,"scroll-x":1090},{tableTitle:Vue.withCtx((()=>[Vue.createVNode(u,{type:"primary",onClick:T},{icon:Vue.withCtx((()=>[Vue.createVNode(n,null,{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(l))])),_:1})])),default:Vue.withCtx((()=>[f])),_:1})])),_:1},8,["columns","dataSource","row-key","actionColumn"]),Vue.createVNode(y,{show:b.value,"onUpdate:show":t[4]||(t[4]=e=>b.value=e),"show-icon":!1,preset:"dialog",title:N.value},{action:Vue.withCtx((()=>[Vue.createVNode(C,null,{default:Vue.withCtx((()=>[Vue.createVNode(u,{onClick:t[3]||(t[3]=()=>b.value=!1)},{default:Vue.withCtx((()=>[v])),_:1}),Vue.createVNode(u,{type:"info",loading:x.value,onClick:B},{default:Vue.withCtx((()=>[m])),_:1},8,["loading"])])),_:1})])),default:Vue.withCtx((()=>[Vue.createVNode(p,{model:k,rules:r,ref_key:"formRef",ref:h,"label-placement":"left","label-width":85,class:"py-4"},{default:Vue.withCtx((()=>[Vue.createVNode(c,{label:"名称",path:"name"},{default:Vue.withCtx((()=>[Vue.createVNode(i,{placeholder:"请输入实例名称",value:k.name,"onUpdate:value":t[0]||(t[0]=e=>k.name=e)},null,8,["value"])])),_:1}),Vue.createVNode(c,{label:"重置 secret",path:"resetSecret"},{default:Vue.withCtx((()=>[Vue.createVNode(d,{checked:k.resetSecret,"onUpdate:checked":t[1]||(t[1]=e=>k.resetSecret=e)},null,8,["checked"])])),_:1}),Vue.createVNode(c,{label:"监控",path:"enableReport"},{default:Vue.withCtx((()=>[Vue.createVNode(s,{value:k.enableReport,"onUpdate:value":t[2]||(t[2]=e=>k.enableReport=e),disabled:0==Vue.unref(g).level},null,8,["value","disabled"])])),_:1})])),_:1},8,["model"])])),_:1},8,["show","title"])])),_:1})])}}}))}}}));
