System.register(["./vendor-legacy.9d0d38ef.js","./TableAction-legacy.c2cce013.js","./index-legacy.d1f2a5dd.js","./index-legacy.ee50fea4.js","./useDesignSetting-legacy.ecb6b3a9.js"],(function(e,t){"use strict";var n,a,o,i,l,s,r,u=document.createElement("style");return u.textContent=".top[data-v-4ff07e73]{display:flex}.n-gradient-text[data-v-4ff07e73]{font-size:24px}\n",document.head.appendChild(u),{setters:[e=>{n=e.i,a=e.g,o=e.s},e=>{i=e.T,l=e.B},e=>{s=e.b},e=>{r=e._},null],execute:function(){const t=[{title:"StreamPath",key:"Path",width:100},{title:"类型",key:"Type",width:50},{title:"订阅者",key:"Subscribers",width:50},{title:"开始时间",key:"StartTime",width:100},{title:"BPS",key:"BPS",width:100,render(e){const t=e.BPS<<3;return t>1048576?Vue.h("text",(t/1024/1024).toFixed(2)+" mb/s"):t>1024?Vue.h("text",(t/1024).toFixed(2)+" kb/s"):Vue.h("text",t+" b/s")}}];e("default",r(Vue.defineComponent({__name:"index",setup(e){const r=n(),u=a(),{params:c}=r,d=c.id,h=Vue.ref([]),p=Vue.reactive({width:220,title:"操作",key:"action",fixed:"right",render:e=>Vue.h(i,{style:"button",actions:[{label:"流详情",type:"primary",onClick:m.bind(null,e),ifShow:()=>!0}],dropDownActions:[{label:"http公网",key:"1",text:e.Path,ifShow:()=>!0},{label:"http局域网",key:"2",text:e.Path,ifShow:()=>!0},{label:"https公网",key:"3",text:e.Path,ifShow:()=>!0},{label:"https局域网",key:"4",text:e.Path,ifShow:()=>!0}],select:(e,t)=>{!async function(e,t){const n=t.text,a=await s(d,"2"==e||"4"==e,"3"==e||"4"==e);window.open(`${a}/preview/${n}`,"_blank")}(e,t)}})});async function y(e){const t=JSON.parse(e.data);h.value=t.Streams.sort(((e,t)=>e.Path.localeCompare(t.Path)))}function f(e){}function m(e){const t=e.id,n=e.Path;u.push({name:"instance_stream_detail",query:{id:t,path:n}})}return Vue.onMounted((()=>{const e=new EventSource("/api/summary?m7sid="+d);e.onmessage=y,o((()=>e.close()))})),(e,n)=>{const a=Vue.resolveComponent("n-card");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createVNode(a,{bordered:!1,class:"proCard"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(l),{title:"流列表",columns:Vue.unref(t),dataSource:h.value,pagination:!1,"row-key":e=>e.id,actionColumn:p,"onUpdate:checkedRowKeys":f,"scroll-x":1090},null,8,["columns","dataSource","row-key","actionColumn"])])),_:1})])}}}),[["__scopeId","data-v-4ff07e73"]]))}}}));
